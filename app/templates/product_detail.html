{% extends "base.html" %}
{% block content %}
<h2>{{ product.name }}</h2>
<img src="{{ product.image_url }}" alt="{{ product.name }}" width="300">
<p>Базовая цена: <span id="base-price">{{ product.price }}</span> $</p>

<form id="product-form" action="{{ url_for('main.product_detail', product_id=product.id) }}" method="POST">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

  <label>Количество пицц:
    <input type="number" id="pizza-quantity" name="quantity" min="1" value="1" required>
  </label>

  <h3>Ингредиенты</h3>
  <div id="ingredients-list">
    {% for ing in product.ingredients %}
      <div class="ingredient" data-ing-id="{{ ing.id }}" data-ing-price="{{ ing.price }}">
        <span>{{ ing.name }} (+{{ ing.price }} $)</span>
        <button type="button" class="dec">-</button>
        <input type="number" class="ing-quantity" name="ingredient_{{ ing.id }}" value="1" min="0">
        <button type="button" class="inc">+</button>
      </div>
    {% endfor %}
  </div>

  <p>Итоговая цена: <span id="total-price">{{ product.price }}</span> $</p>

  <button type="submit">Добавить в корзину</button>
</form>



{% endblock %}
